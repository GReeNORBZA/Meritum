# D08-001: Analytics constants, enums, and shared types

## Project Context
You are building **Meritum Health Technologies**, a self-serve medical billing platform for Alberta physicians (AHCIP + WCB claims). This is a monorepo with:
- `apps/api` — Fastify 5 REST API with Drizzle ORM, PostgreSQL 16
- `apps/web` — Next.js 15 frontend
- `packages/shared` — Shared Drizzle schemas, Zod validators, constants, utilities

Tech stack: TypeScript, Fastify 5, Drizzle ORM, PostgreSQL 16, Vitest + Supertest, Lucia auth.

Read `CLAUDE.md` in the project root for full conventions (naming, structure, error handling, security, testing).

## What to Build
Create `packages/shared/src/constants/analytics.constants.ts` with all Domain 8 constants:

**Metric keys (VARCHAR(50) identifiers for analytics_cache.metric_key):**
- revenue_monthly, revenue_by_ba, revenue_by_location, revenue_by_hsc
- claims_submitted, claims_assessed, claims_paid, claims_rejected, claims_adjusted
- rejection_rate_monthly, rejection_by_code, rejection_by_hsc, rejection_resolution_funnel
- aging_brackets, approaching_deadline, expired_claims, avg_resolution_time, stale_claims
- wcb_by_form_type, wcb_timing_tier_dist, wcb_fee_tier_analysis, wcb_revenue_trend, wcb_rejection_rate
- ai_coach_acceptance_rate, ai_coach_revenue_recovered, ai_coach_by_category, ai_coach_top_accepted, ai_coach_suppressed
- multisite_revenue, multisite_claims, multisite_rrnp
- pending_pipeline, avg_fee_per_claim, top_hsc_codes

**Report types (VARCHAR(50)):**
- ACCOUNTANT_SUMMARY, ACCOUNTANT_DETAIL, WEEKLY_SUMMARY, MONTHLY_PERFORMANCE
- RRNP_QUARTERLY, WCB_TIMING, REJECTION_DIGEST, DATA_PORTABILITY

**Report formats:**
- PDF, CSV, ZIP

**Subscription frequencies:**
- DAILY, WEEKLY, MONTHLY, QUARTERLY

**Delivery methods:**
- IN_APP, EMAIL, BOTH

**Time periods (for dashboard period selector):**
- THIS_WEEK, THIS_MONTH, LAST_MONTH, THIS_QUARTER, THIS_YEAR, CUSTOM_RANGE, TRAILING_12_MONTHS

**Period comparison mapping:**
- THIS_WEEK -> same days last week
- THIS_MONTH -> same days prior month
- LAST_MONTH -> month before that
- THIS_QUARTER -> same quarter prior year
- THIS_YEAR -> same period prior year
- CUSTOM_RANGE -> same-length period immediately prior
- TRAILING_12_MONTHS -> 12 months before that

**Claim type filter values:**
- AHCIP, WCB, BOTH

**Aging bracket boundaries:**
- 0-30 days, 31-60 days, 61-90 days, 90+ days (from date of service)

**Audit action identifiers:**
- analytics.dashboard_viewed, analytics.report_generated, analytics.report_downloaded
- analytics.data_portability_requested, analytics.data_portability_downloaded
- analytics.subscription_created, analytics.subscription_updated, analytics.subscription_cancelled

**Report retention defaults (days):**
- SCHEDULED: 90, ON_DEMAND: 30, DATA_PORTABILITY: 3 (72 hours)

**Report download link expiry (days):**
- SCHEDULED: 90, ON_DEMAND: 30, DATA_PORTABILITY: 3

Export all as frozen objects / TypeScript enums.

## FRD References
- Domain 8 Section 7.1: metric_key VARCHAR(50) identifiers for analytics_cache table.
- Domain 8 Section 7.2: report_type enum — ACCOUNTANT_SUMMARY, ACCOUNTANT_DETAIL, WEEKLY_SUMMARY, MONTHLY_PERFORMANCE, RRNP_QUARTERLY, WCB_TIMING, REJECTION_DIGEST, DATA_PORTABILITY.
- Domain 8 Section 7.3: frequency — DAILY, WEEKLY, MONTHLY, QUARTERLY. delivery_method — IN_APP, EMAIL, BOTH.
- Domain 8 Section 3.1: Time periods with comparison mappings (Table 7).
- Domain 8 Section 11.2: Audit trail actions (Table 20).
- Domain 8 Section 7.2: Retention — 90 days scheduled, 30 days on-demand, 72 hours data portability.

## Tests
No specific unit tests for this task — verified by build command.

## Run After Completion
After completing your changes, run:
```bash
pnpm --filter shared build
```
Fix any errors before finishing.
