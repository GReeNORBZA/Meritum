# D08-004: Drizzle schema for report_subscriptions table

## Project Context
You are building **Meritum Health Technologies**, a self-serve medical billing platform for Alberta physicians (AHCIP + WCB claims). This is a monorepo with:
- `apps/api` — Fastify 5 REST API with Drizzle ORM, PostgreSQL 16
- `apps/web` — Next.js 15 frontend
- `packages/shared` — Shared Drizzle schemas, Zod validators, constants, utilities

Tech stack: TypeScript, Fastify 5, Drizzle ORM, PostgreSQL 16, Vitest + Supertest, Lucia auth.

Read `CLAUDE.md` in the project root for full conventions (naming, structure, error handling, security, testing).

## Dependencies
This task depends on: **D08-001** (analytics constants must exist first).

## What to Build
Add to `packages/shared/src/schemas/db/analytics.schema.ts` the report_subscriptions table.

**report_subscriptions table:**

| Column | Type | Constraints | Notes |
|--------|------|-------------|-------|
| subscription_id | UUID | PK | Default: gen_random_uuid() |
| provider_id | UUID FK | NOT NULL | FK to providers. Indexed. |
| report_type | VARCHAR(50) | NOT NULL | Which report to generate |
| frequency | VARCHAR(20) | NOT NULL | DAILY, WEEKLY, MONTHLY, QUARTERLY |
| delivery_method | VARCHAR(20) | NOT NULL, DEFAULT 'IN_APP' | IN_APP, EMAIL, BOTH |
| is_active | BOOLEAN | NOT NULL, DEFAULT true | Active subscriptions generate reports on schedule |
| created_at | TIMESTAMPTZ | NOT NULL, DEFAULT now() | |
| updated_at | TIMESTAMPTZ | NOT NULL, DEFAULT now() | |

**Indexes:**
- UNIQUE on (provider_id, report_type) — one subscription per report type per physician
- Index on (is_active, frequency) for scheduled job queries

Export table and inferred types (InsertReportSubscription, SelectReportSubscription).

## FRD References
- Domain 8 Section 7.3: report_subscriptions table schema (Table 13).
- Domain 8 Section 6.1: Available scheduled reports — Weekly Billing Summary, Monthly Performance, RRNP Quarterly, WCB Timing, Rejection Alert Digest (Table 10).

## Tests
No specific unit tests for this task — verified by build command.

## Run After Completion
After completing your changes, run:
```bash
pnpm --filter shared build
```
Fix any errors before finishing.
