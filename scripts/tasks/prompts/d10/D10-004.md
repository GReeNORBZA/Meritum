# D10-004 â€” Zod validation schemas for all mobile API inputs

## Task ID
D10-004

## Description
Create Zod validation schemas for all Domain 10 Mobile Companion API inputs.

## Dependencies
- D10-001 (constants must exist first)

## Build Instructions

Create `packages/shared/src/schemas/validation/mobile.validation.ts` with Zod schemas:

**Shift management:**
- StartShiftSchema: { location_id: UUID }
- ShiftIdParamSchema: { id: UUID }
- ListShiftsQuerySchema: { limit?: number(1-50, default 10), status?: enum(ACTIVE, ENDED, REVIEWED) }

**Shift patient logging (creates a claim linked to shift):**
- LogPatientSchema: { patient_id: UUID, health_service_code: string(max 10), modifiers?: string[], date_of_service?: ISO date (default today), quick_note?: string(max 500) }. Note: quick_note stored on claim but not transmitted in AHCIP submission.

**Favourite codes:**
- CreateFavouriteSchema: { health_service_code: string(max 10), display_name?: string(max 100), default_modifiers?: string[], sort_order: integer }
- UpdateFavouriteSchema: { display_name?: string(max 100), default_modifiers?: string[], sort_order?: integer }. At least one field required.
- FavouriteIdParamSchema: { id: UUID }
- ReorderFavouritesSchema: { items: array of { favourite_id: UUID, sort_order: integer }, min 1, max 30 items }

**Quick claim entry:**
- QuickClaimSchema: { patient_id: UUID, health_service_code: string(max 10), modifiers?: string[], date_of_service?: ISO date (default today) }. Always creates AHCIP draft claim.

**Patient minimal create (from mobile):**
- MobilePatientSchema: { first_name: string(max 100), last_name: string(max 100), phn: string(exactly 9 digits), date_of_birth: ISO date, gender: enum(M, F, X) }. Minimal fields for mobile -- full patient edit on desktop.

All UUIDs validated as v4 format. All dates validated as ISO 8601.

Export all schemas.

After creating the file, update the barrel export at `packages/shared/src/schemas/index.ts`.

## FRD References
- Domain 10 Section 8.1: Shift management endpoints (Table 6).
- Domain 10 Section 8.2: Favourite codes endpoints (Table 7).
- Domain 10 Section 3.1: Quick entry flow -- patient, code, modifiers, date of service.
- Domain 10 Section 3.2: Quick entry creates AHCIP draft only. No validation on mobile.

## Security Requirements
- quick_note max 500 chars -- prevent unbounded text storage.
- PHN validated as exactly 9 digits -- Alberta PHN format.
- Modifiers validated against known modifier codes from Reference Data.
- date_of_service cannot be in the future.

## Codebase Context
- Zod validation schemas go in `packages/shared/src/schemas/validation/` (e.g., `mobile.validation.ts`).
- See existing validation files for patterns (other domains use similar Zod schemas with UUID, date, and enum validation).
- PHN masking: display as `123******` (masking is handled at the display layer, but the validation ensures correct format).
- Quick claims are AHCIP-only, always draft state, source='mobile_quick_entry'.
- After-hours detection is suggestion-only (AFHR/NGHR/WKND modifiers), never auto-applied.

## Verification
```bash
pnpm --filter shared build
```
