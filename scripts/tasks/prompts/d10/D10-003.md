# D10-003 â€” Drizzle schema for favourite_codes table

## Task ID
D10-003

## Description
Create the Drizzle schema for the `favourite_codes` table in the shared package.

## Dependencies
- D10-001 (constants must exist first)

## Build Instructions

Add to `packages/shared/src/schemas/db/mobile.schema.ts` the `favourite_codes` table.

**favourite_codes table:**

| Column | Type | Constraints | Notes |
|--------|------|-------------|-------|
| favourite_id | UUID | PK | Default: gen_random_uuid() |
| provider_id | UUID FK | NOT NULL | FK to providers. Indexed. |
| health_service_code | VARCHAR(10) | NOT NULL | HSC code reference |
| display_name | VARCHAR(100) | NULLABLE | Custom label. Null = use official description from Reference Data. |
| sort_order | INTEGER | NOT NULL | Display order in favourites list. Physician can reorder. |
| default_modifiers | JSONB | NULLABLE | Array of modifiers to auto-select. E.g. ['CMGP']. |
| created_at | TIMESTAMPTZ | NOT NULL, DEFAULT now() | |

**Indexes:**
- UNIQUE on (provider_id, health_service_code) -- no duplicate favourites per physician
- Index on (provider_id, sort_order) for ordered retrieval

Export table and inferred types (InsertFavouriteCode, SelectFavouriteCode).

After adding the table, update barrel exports at `packages/shared/src/schemas/db/index.ts` and `packages/shared/src/schemas/index.ts`.

## FRD References
- Domain 10 Section 4.1: Favourites data model (Table 2).
- Domain 10 Section 4.2: Max 30 favourites, unique per HSC code per physician.

## Security Requirements
- provider_id scoping -- favourites are per-physician. No cross-physician access.
- health_service_code validated against Reference Data (Domain 2) to prevent invalid codes.
- default_modifiers JSONB validated to contain only known modifier codes.

## Codebase Context
- DB: PostgreSQL via Drizzle ORM. Schemas in `packages/shared/src/schemas/db/`.
- This table is added to the same file created in D10-002: `packages/shared/src/schemas/db/mobile.schema.ts`.
- Reference Data from D02 includes health service codes with fee schedule amounts.
- Favourites max 30 per physician, auto-seed from top 10 billed codes.
- Existing domain schemas provide patterns for FK references and index definitions.

## Verification
```bash
pnpm --filter shared build
```
