# Task D04A-001: AHCIP constants: batch statuses, validation check IDs (A1–A19), encounter types, after-hours types, modifier codes, cycle timeline

## Project Context
- Monorepo: Turborepo + pnpm workspaces
- API: `apps/api` (Fastify 5, TypeScript)
- Shared: `packages/shared` (Drizzle schemas, Zod validators, constants)
- DB: PostgreSQL 16 with Drizzle ORM
- Test: Vitest + Supertest
- Auth: Lucia sessions with RBAC middleware from Domain 1
- All queries MUST include physician_id for tenant isolation (HIA custodian boundary)
- Claims contain PHI — no PHI in logs, errors, or emails. PHN masked as 123******
- Domain 4.0 (Claim Lifecycle Core) provides base claims table, state machine, shared validation (S1-S7)
- This domain extends D04 Core with AHCIP-specific validation (A1-A19), fee calculation, batch cycle, and H-Link file generation

## What to Build

Create `packages/shared/src/constants/ahcip.constants.ts` with all AHCIP-specific constants:

**AhcipBatchStatus enum:**
- ASSEMBLING, GENERATED, SUBMITTED, RESPONSE_RECEIVED, RECONCILED, ERROR

**AHCIP validation check IDs (19 checks):**
- A1_HSC_CODE_VALID, A2_HSC_ACTIVE_ON_DOS, A3_BA_NUMBER_VALID
- A4_GOVERNING_RULES, A5_MODIFIER_ELIGIBILITY, A6_MODIFIER_COMBINATION
- A7_DIAGNOSTIC_CODE_REQUIRED, A8_FACILITY_REQUIRED, A9_REFERRAL_REQUIRED
- A10_DI_SURCHARGE_ELIGIBILITY, A11_PCPCM_ROUTING, A12_AFTER_HOURS_ELIGIBILITY
- A13_90_DAY_WINDOW, A14_TIME_BASED_DURATION, A15_CALL_COUNT_VALID
- A16_SHADOW_BILLING_CONSISTENCY, A17_RRNP_ELIGIBILITY, A18_PREMIUM_ELIGIBILITY_351
- A19_BUNDLING_CHECK

**Check severities map:** A1–A9,A13(expired),A14,A15 = Error; A10–A12,A13(warning),A16,A19 = Warning; A17,A18 = Info

**AfterHoursType enum:** EVENING, WEEKEND, NIGHT, STAT_HOLIDAY

**After-hours time slot definitions:**
- Standard: Mon–Fri 08:00–17:00 (excl. holidays)
- Evening: Mon–Fri 17:00–23:00
- Night: 23:00–08:00 any day
- Weekend: Sat/Sun full day
- Stat holiday: 10 named Alberta statutory holidays

**EncounterType enum:** CONSULTATION, FOLLOW_UP, PROCEDURE, SURGICAL, DIAGNOSTIC_IMAGING, OBSTETRIC, CDM, VIRTUAL, OTHER

**Well-known modifier codes:** TM (shadow billing), AFHR (after-hours), CMGP (comprehensive care), LOCI (locum), 13.99H (ED surcharge), BMI (body mass index)

**GoverningRule enum:** GR_1, GR_3, GR_5, GR_8, GR_10, GR_14, GR_18 (representative set)

**Batch cycle constants:**
- CUTOFF_DAY: 4 (Thursday)
- CUTOFF_HOUR: 12 (MT)
- RETRY_INTERVALS: [60, 300, 900, 3600] seconds (exponential backoff)
- MAX_RETRIES: 4

Export all as frozen objects / TypeScript enums. Use `as const` and `Object.freeze` patterns consistent with other constant files in the project. See `CLAUDE.md` for coding conventions.

## FRD References

- Domain 4.1 Section 5.1: 19 AHCIP validation checks (A1–A19) with severity assignments.
- Domain 4.1 Section 3.1: Thursday batch cycle timeline — 12:00 MT cutoff, assembly, transmission, assessment Friday.
- Domain 4.1 Section 6.5: After-hours time slot definitions — standard, evening, night, weekend, stat holiday.
- Domain 4.1 Section 5.2: Governing rules GR 1,3,5,8,10,14,18.
- Domain 4.1 Table 8: Modifier codes and fee impact.

## Prerequisites

- None. This is the first task in Domain 4.1.
- The `packages/shared/src/constants/` directory must exist (created by Domain 1).
- Domain 4.0 constants (`packages/shared/src/constants/claim.constants.ts`) should be in place for reference.

## Run After Completion

```bash
pnpm --filter shared build
```

All tests must pass before outputting [TASK_COMPLETE].
