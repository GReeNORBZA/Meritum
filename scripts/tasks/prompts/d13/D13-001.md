# D13-001: Support system constants, enums, and shared types

**Domain:** 13 â€” Support System
**Task ID:** D13-001
**Verify:** `pnpm --filter shared build`

---

## Build Instructions

Create `packages/shared/src/constants/support.constants.ts` with all Domain 13 constants:

**Ticket statuses:**
- OPEN, IN_PROGRESS, WAITING_ON_CUSTOMER, RESOLVED, CLOSED

**Ticket priorities:**
- LOW, MEDIUM, HIGH, URGENT
- Default: MEDIUM
- URGENT auto-assigned for batch submission failures (context_metadata contains batch_error)

**Ticket categories:**
- BILLING, TECHNICAL, ACCOUNT, FEATURE_REQUEST
- null initially -- assigned by support team during triage

**SLA targets (business hours Mon-Fri 08:00-18:00 MT, Thursday 06:00-22:00 MT):**
- URGENT: first response < 2 hours, resolution < 4 hours
- HIGH: first response < 4 hours, resolution < 1 business day
- MEDIUM: first response < 1 business day, resolution < 3 business days
- LOW: first response < 2 business days, resolution < 5 business days

**Help centre article categories:**
- GETTING_STARTED, AHCIP_BILLING, WCB_BILLING, MODIFIERS_AND_RULES, AI_COACH, ACCOUNT_AND_BILLING, TROUBLESHOOTING

**Article feedback values:**
- HELPFUL, NOT_HELPFUL

**Satisfaction rating range:**
- 1-5 (integer)

**Context-aware help mapping (page URL pattern -> help category):**
- /claims/new, /claims/*/edit -> AHCIP_BILLING
- /claims/*/rejected -> search by rejection code from context_metadata
- /wcb/* -> WCB_BILLING
- /settings/* -> ACCOUNT_AND_BILLING
- /analytics/* -> GETTING_STARTED (analytics help)
- /onboarding/* -> GETTING_STARTED
- default -> search page

**Audit action identifiers:**
- support.ticket_created, support.ticket_updated, support.ticket_resolved
- support.ticket_closed, support.ticket_rated
- support.article_viewed, support.article_feedback
- support.help_searched

**Phase 1.5 AI chat constants (placeholders):**
- CONFIDENCE_THRESHOLD: 0.70 (below this, escalate to email)
- CHAT_ENABLED: false (set true at Phase 1.5 launch)

Export all as frozen objects / TypeScript enums.

---

## FRD References

- Domain 13 Section 3.2: Ticket statuses -- OPEN, IN_PROGRESS, WAITING_ON_CUSTOMER, RESOLVED, CLOSED.
- Domain 13 Section 3.2: Ticket priorities -- LOW, MEDIUM, HIGH, URGENT. Table 3 for SLA targets.
- Domain 13 Section 2.1: Help centre categories (Table 1).
- Domain 13 Section 2.3: Context-aware help mapping -- page URL to help category.
- Domain 13 Section 4.1: AI chat confidence threshold 0.70 for escalation.

---

## Codebase Context

- **Monorepo structure:** `apps/api` (Fastify 5 + Vitest), `packages/shared` (Drizzle + Zod), `apps/web` (Next.js 15)
- **Constants pattern:** See existing constants in `packages/shared/src/constants/`. Follow the same export pattern (frozen objects or `as const` enums).
- **Barrel exports:** After creating the file, update `packages/shared/src/constants/index.ts` to re-export all support constants.
- **Existing domains for reference:** IAM (D01), Platform Ops (D12), Notifications (D09), Reference Data (D02), Providers (D05), Patients (D06), Claims (D04/D04A/D04W), Intelligence (D07), Analytics (D08), Onboarding (D11), Mobile (D10).
