# Task D09-001: Notification constants — event types, priorities, channels, digest modes, delivery statuses, retry schedule, audit actions

## What to Build

Create `packages/shared/src/constants/notification.constants.ts` with all notification constants:

**NotificationPriority enum:** URGENT, HIGH, MEDIUM, LOW

**NotificationChannel enum:** IN_APP, EMAIL, PUSH (Push is Phase 2, include for forward compatibility)

**DigestMode enum:** IMMEDIATE, DAILY_DIGEST, WEEKLY_DIGEST

**EmailDeliveryStatus enum:** QUEUED, SENT, DELIVERED, BOUNCED, FAILED

**Event catalogue — Claim Lifecycle (Domain 4, 13 events):**
- CLAIM_VALIDATED (LOW, in-app only)
- CLAIM_FLAGGED (MEDIUM, in-app only)
- DEADLINE_7_DAY (MEDIUM, in-app + email)
- DEADLINE_3_DAY (HIGH, in-app + email)
- DEADLINE_1_DAY (URGENT, in-app + email)
- DEADLINE_EXPIRED (HIGH, in-app + email)
- BATCH_ASSEMBLED (LOW, in-app only)
- BATCH_SUBMITTED (MEDIUM, in-app + email)
- BATCH_ERROR (URGENT, in-app + email)
- CLAIM_ASSESSED (LOW, in-app only)
- CLAIM_REJECTED (HIGH, in-app + email)
- CLAIM_PAID (LOW, in-app only)
- DUPLICATE_DETECTED (MEDIUM, in-app only)

**Intelligence Engine (Domain 7, 3 events):**
- AI_SUGGESTION_READY (LOW, in-app only)
- AI_HIGH_VALUE_SUGGESTION (HIGH, in-app + email)
- SOMB_CHANGE_IMPACT (MEDIUM, in-app + email)

**Provider Management (Domain 5, 5 events):**
- DELEGATE_INVITED (MEDIUM, in-app + email)
- DELEGATE_ACCEPTED (MEDIUM, in-app + email)
- DELEGATE_REVOKED (HIGH, in-app + email)
- BA_STATUS_CHANGED (HIGH, in-app + email)
- RRNP_RATE_CHANGED (MEDIUM, in-app + email)

**Platform Operations (5 events):**
- PAYMENT_FAILED (URGENT, in-app + email)
- PAYMENT_RECOVERED (HIGH, in-app + email)
- ACCOUNT_SUSPENDED (URGENT, in-app + email)
- ACCOUNT_REACTIVATED (HIGH, in-app + email)
- MAINTENANCE_SCHEDULED (MEDIUM, in-app + email)

**Analytics (Domain 8, 2 events):**
- REPORT_READY (MEDIUM, in-app + email)
- DATA_EXPORT_READY (MEDIUM, in-app + email)

**Export EVENT_CATALOGUE:** frozen object mapping each event to { priority, defaultInApp, defaultEmail, category }.

**Email retry schedule:** [0, 5*60*1000, 30*60*1000, 2*60*60*1000] (immediate, +5min, +30min, +2hr). Max 4 attempts.

**Notification retention:** 90 days primary, 365 days archive.

**Audit action identifiers:**
- notification.created, notification.read, notification.read_all, notification.dismissed
- notification.email_sent, notification.email_bounced, notification.email_failed
- notification.preference_updated, notification.quiet_hours_updated
- notification.digest_assembled, notification.event_emitted

Export all as frozen objects / TypeScript enums.

## Critical Security Rules

- All constants must be exported as frozen objects (`Object.freeze` / `as const`) to prevent runtime mutation.
- Event catalogue must not contain any PHI or patient data.
- Audit action identifiers must match the exact strings used by the audit logging system.

## Prerequisites

- None. This is the first task in Domain 9.
- The `packages/shared/src/constants/` directory must exist (created by Domain 1).

## FRD Reference

- Domain 9 Section 3: Event catalogue with 28+ events across 5 categories. Each event has default in-app, email, and priority settings.
- Domain 9 Section 6.2: Retry schedule -- 4 attempts at 0, +5min, +30min, +2hr. Hard bounces no retry. Soft bounces retry.
- Domain 9 Section 5.1: Notification retention 90 days primary.

## Run After Completion

```bash
pnpm --filter shared build
```

All tests must pass before outputting [TASK_COMPLETE].
