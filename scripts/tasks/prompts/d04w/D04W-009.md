# D04W-009: Generate and apply database migration for all WCB tables

## Project Context
You are building **Meritum Health Technologies**, a self-serve medical billing platform for Alberta physicians (AHCIP + WCB claims). This is a monorepo with:
- `apps/api` — Fastify 5 REST API with Drizzle ORM, PostgreSQL 16
- `apps/web` — Next.js 15 frontend
- `packages/shared` — Shared Drizzle schemas, Zod validators, constants, utilities

Tech stack: TypeScript, Fastify 5, Drizzle ORM, PostgreSQL 16, Vitest + Supertest, Lucia auth.

## What to Build
Run the Drizzle migration generator for all WCB tables:

```bash
cd apps/api
pnpm drizzle-kit generate
pnpm drizzle-kit migrate
```

Verify migration created in `apps/api/drizzle/migrations/`.
Verify all 11 tables exist: wcb_claim_details, wcb_injuries, wcb_prescriptions, wcb_consultations, wcb_work_restrictions, wcb_invoice_lines, wcb_attachments, wcb_batches, wcb_return_records, wcb_return_invoice_lines, wcb_remittance_records.
Verify FK constraints to claims table (Domain 4.0) resolve correctly.
Verify all UNIQUE constraints and CHECK constraints are applied.
Verify all indexes are created.

## Dependencies
This task depends on: D04W-002, D04W-003, D04W-004, D04W-005, D04W-006, D04W-007

## Tests
No specific unit tests for this task — verified by build/migration command.

## Run After Completion
After completing your changes, run:
```bash
cd apps/api && pnpm drizzle-kit generate 2>&1 && pnpm drizzle-kit migrate 2>&1
```
Fix any errors before finishing.
