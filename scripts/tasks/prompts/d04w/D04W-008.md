# D04W-008: Zod validation schemas for WCB claim CRUD, batch, return, remittance, and MVP endpoints

## Project Context
You are building **Meritum Health Technologies**, a self-serve medical billing platform for Alberta physicians (AHCIP + WCB claims). This is a monorepo with:
- `apps/api` — Fastify 5 REST API with Drizzle ORM, PostgreSQL 16
- `apps/web` — Next.js 15 frontend
- `packages/shared` — Shared Drizzle schemas, Zod validators, constants, utilities

Tech stack: TypeScript, Fastify 5, Drizzle ORM, PostgreSQL 16, Vitest + Supertest, Lucia auth.

## What to Build
Create `packages/shared/src/schemas/wcb.schema.ts` with Zod schemas:

**WCB Claim CRUD:**
- wcbClaimCreateSchema: { form_id: enum(WCB_FORM_TYPES), patient_id: uuid(), wcb_claim_number: string().max(7).optional(), parent_wcb_claim_id: uuid().optional(), ...form-section fields as optional (service layer enforces form-specific requirements) }
- wcbClaimUpdateSchema: partial version of create schema (all fields optional, service validates)
- wcbClaimIdParamSchema: { id: string().uuid() }
- wcbClaimValidateResponseSchema: { errors: array, warnings: array, info: array, passed: boolean, timing_tier, deadline_info }
- wcbFormSchemaResponseSchema: { form_id, sections: array of { name, active, fields: array of { name, required, conditional, type, maxLength } } }

**Invoice line sub-schemas by line_type:**
- wcbInvoiceLineStandardSchema: { health_service_code, modifier_1/2/3, calls, encounters }
- wcbInvoiceLineDatedSchema: { ...standard + date_of_service_from, date_of_service_to, facility_type_override, skill_code_override, amount }
- wcbInvoiceLineSupplySchema: { quantity, supply_description, amount }
- wcbInvoiceLineCorrectionSchema: { line_type: enum(WAS, SHOULD_BE), correction_pair_id, adjustment_indicator, billing_number_override, ...standard fields }

**Injury sub-schema:** { part_of_body_code: string(), side_of_body_code: string().optional(), nature_of_injury_code: string() }
**Prescription sub-schema:** { prescription_name, strength, daily_intake }
**Consultation sub-schema:** { category: enum(CONREF, INVE), type_code, details, expedite_requested: enum(Y, N).optional() }
**Work restriction sub-schema:** { activity_type: enum(...), restriction_level, hours_per_day: number().optional(), max_weight: string().optional() }
**Attachment sub-schema:** { file_name, file_type: enum(...), file_content_b64, file_description: string().max(60) }

**WCB Batch Management:**
- wcbBatchCreateSchema: {} (auto-selects queued claims for authenticated physician)
- wcbBatchIdParamSchema: { id: string().uuid() }
- wcbBatchConfirmUploadSchema: {} (just POST with auth — batch ID in URL)
- wcbBatchListQuerySchema: { status: enum(BATCH_STATUSES).optional(), page: number().default(1), page_size: number().max(100).default(20) }

**Return File / Remittance:**
- wcbReturnFileUploadSchema: { file: binary/multipart (tab-delimited text file) }
- wcbRemittanceUploadSchema: { file: binary/multipart (XML file) }
- wcbRemittanceListQuerySchema: { start_date: date().optional(), end_date: date().optional(), page, page_size }
- wcbRemittanceIdParamSchema: { id: string().uuid() }

**MVP Endpoints:**
- wcbManualOutcomeSchema: { wcb_claim_number: string().max(7).optional(), acceptance_status: enum(accepted, rejected), payment_amount: number().optional() }

Export all schemas and inferred TypeScript types.

## FRD References
- Domain 4.2 Section 9: All 6 API endpoint groups — claim CRUD (6 endpoints), batch management (5 endpoints), return file (2 endpoints), remittance (3 endpoints), MVP (2 endpoints).
- Domain 4.2 Section 3: Child table cardinality constraints — injuries 1-5, prescriptions 1-5, consultations 1-5, invoice lines 1-25, attachments max 3.

## Dependencies
This task depends on: D04W-001

## Tests
No specific unit tests for this task — verified by build/migration command.

## Run After Completion
After completing your changes, run:
```bash
pnpm --filter shared build
```
Fix any errors before finishing.
