# Task D12-023: Service: status page and incident management

## What to Build

Add to `apps/api/src/domains/platform/platform.service.ts`:

**Public status page:**
- `getStatusPage()` — return all components with their current status + active incidents with latest update. No auth required.
- `getIncidentHistory(page: number, pageSize: number)` — paginated incident history including resolved. No auth required.

**Admin incident management:**
- `createIncident(adminUserId: string, data: CreateIncidentInput)` — create incident, update affected component statuses, emit MAINTENANCE_SCHEDULED notification. Audit log: incident.created.
- `updateIncident(adminUserId: string, incidentId: string, status: string, message: string)` — post update to incident. If resolving: set resolved_at, restore component statuses to operational. Emit incident update notification. Audit log: incident.updated.
- `updateComponentStatus(adminUserId: string, componentId: string, status: string)` — manual component status override. Audit log: component.status_updated.

**System health seed:**
- `seedStatusComponents()` — idempotent seed of the 8 monitored components: Web Application, API, H-Link Submission, WCB Submission, AI Coach, Email Delivery, Database, Payment Processing.

## Prerequisites

This task depends on the following completed tasks: D12-012

## Tests to Write

```typescript
  it('getStatusPage returns all components and active incidents');
  it('getStatusPage excludes resolved incidents');
  it('getIncidentHistory includes resolved incidents paginated');
  it('createIncident creates incident and updates component statuses');
  it('createIncident emits notification event');
  it('updateIncident posts update to incident');
  it('updateIncident restores components on resolution');
  it('updateComponentStatus changes component health');
  it('seedStatusComponents is idempotent');
```

## Run After Completion

```bash
pnpm --filter api vitest run src/domains/platform/platform.test.ts
```

All tests must pass before outputting [TASK_COMPLETE].
