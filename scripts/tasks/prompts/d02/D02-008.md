# Task D02-008: Zod validation schemas for admin data management and internal validation endpoints

## What to Build

Add to `packages/shared/src/schemas/reference.schema.ts`:

**Admin upload:**
```ts
adminUploadParamSchema = z.object({
  dataset: z.enum([...DATA_SETS]),  // Use data set enum values from reference.constants.ts
})
```

**Admin staging:**
```ts
adminStagingParamSchema = z.object({
  dataset: z.enum([...DATA_SETS]),
  id: z.string().uuid(),
})
```

**Admin publish:**
```ts
adminPublishSchema = z.object({
  version_label: z.string().min(1).max(50),
  effective_from: z.string().date(),
  source_document: z.string().optional(),
  change_summary: z.string().optional(),
})
```

**Admin version list:**
```ts
adminVersionListSchema = z.object({
  dataset: z.enum([...DATA_SETS]),
})
```

**Admin holidays:**
```ts
createHolidaySchema = z.object({
  date: z.string().date(),
  name: z.string().min(1).max(100),
  jurisdiction: z.enum(['provincial', 'federal', 'both']),
  affects_billing_premiums: z.boolean().default(true),
})

updateHolidaySchema = z.object({
  date: z.string().date().optional(),
  name: z.string().min(1).max(100).optional(),
  jurisdiction: z.enum(['provincial', 'federal', 'both']).optional(),
  affects_billing_premiums: z.boolean().optional(),
})

holidayParamSchema = z.object({
  id: z.string().uuid(),
})
```

**Admin dry-run:**
```ts
dryRunSchema = z.object({
  updated_rule_logic: z.object({}).passthrough(),  // Accept any rule_logic object
})
dryRunParamSchema = z.object({
  rule_id: z.string().max(20),
})
```

**Internal validation:**
```ts
validateContextSchema = z.object({
  hsc: z.array(z.string()).min(1),
  di: z.string().optional(),
  facility: z.string().optional(),
  date: z.string().date(),
  modifiers: z.array(z.string()).optional(),
})

evaluateBatchSchema = z.object({
  claims: z.array(z.object({}).passthrough()).min(1).max(500),
})

ruleDetailSchema = z.object({
  rule_id: z.string().max(20),
})

ruleDetailQuerySchema = z.object({
  date: z.string().date().optional(),
})

versionQuerySchema = z.object({
  date: z.string().date(),
})
```

Export all schemas and inferred TypeScript types. Follow the same patterns used in existing Zod schema files. See `CLAUDE.md` for coding conventions.

## Prerequisites

- D02-001 must be complete (reference constants for DATA_SETS enum).

## FRD Reference

- Domain 2 Section 4.2: 4 internal validation endpoints.
- Domain 2 Section 4.3: 9 admin data management endpoints.

## Run After Completion

```bash
pnpm --filter shared build
```

All tests must pass before outputting [TASK_COMPLETE].
