# Task D02-003: Drizzle schema for wcb_codes and modifier_definitions tables

## What to Build

Add to `packages/shared/src/schemas/db/reference.schema.ts`:

**wcb_codes table (~500-1,000 records):**

| Column | Type | Constraints | Notes |
|--------|------|-------------|-------|
| id | UUID | PK | Default: gen_random_uuid() |
| wcb_code | VARCHAR(10) | NOT NULL | Workers' Compensation Board code |
| description | TEXT | NOT NULL | Full description |
| base_fee | DECIMAL(10,2) | NOT NULL | Fee amount |
| fee_type | VARCHAR(20) | NOT NULL | fixed, calculated, time_based, unit_based |
| requires_claim_number | BOOLEAN | NOT NULL, DEFAULT true | WCB claim number required |
| requires_employer | BOOLEAN | NOT NULL, DEFAULT false | Employer info required |
| documentation_requirements | TEXT | NULLABLE | Documentation notes |
| help_text | TEXT | NULLABLE | User-facing contextual help |
| version_id | UUID FK | NOT NULL, FK -> reference_data_versions | Parent version |
| effective_from | DATE | NOT NULL | Denormalised from version |
| effective_to | DATE | NULLABLE | Denormalised from version |

**Indexes:** (wcb_code, version_id), pg_trgm on wcb_code and description for fuzzy search.

**modifier_definitions table (~15-20 modifiers):**

| Column | Type | Constraints | Notes |
|--------|------|-------------|-------|
| id | UUID | PK | Default: gen_random_uuid() |
| modifier_code | VARCHAR(10) | NOT NULL | e.g., CMGP, LSCD, AFHR, BCP, RRNP, TM, ANE, AST |
| name | VARCHAR(100) | NOT NULL | Human-readable name |
| description | TEXT | NOT NULL | Full description |
| type | VARCHAR(20) | NOT NULL | explicit, implicit, semi_implicit |
| calculation_method | VARCHAR(20) | NOT NULL | percentage, fixed_amount, time_based_units, multiplier, none |
| calculation_params | JSONB | NOT NULL, DEFAULT '{}' | Method-specific params (e.g., { percentage: 0.15 }) |
| applicable_hsc_filter | JSONB | NOT NULL, DEFAULT '{}' | Filter criteria for HSC applicability |
| requires_time_documentation | BOOLEAN | NOT NULL, DEFAULT false | Whether time docs needed |
| requires_facility | BOOLEAN | NOT NULL, DEFAULT false | Whether facility code needed |
| combinable_with | JSONB | NOT NULL, DEFAULT '[]' | Array of modifier codes that can combine |
| exclusive_with | JSONB | NOT NULL, DEFAULT '[]' | Array of mutually exclusive modifier codes |
| governing_rule_reference | VARCHAR(20) | NULLABLE | Reference to governing rule ID |
| help_text | TEXT | NULLABLE | User-facing contextual help |
| version_id | UUID FK | NOT NULL, FK -> reference_data_versions | Parent version |
| effective_from | DATE | NOT NULL | Denormalised from version |
| effective_to | DATE | NULLABLE | Denormalised from version |

**Indexes:** (modifier_code, version_id).

Use Drizzle ORM's `pgTable`. Follow the same patterns used in the reference_data_versions and hsc_codes tables created in D02-002.

Export all tables and inferred types (InsertWcbCode, SelectWcbCode, InsertModifierDefinition, SelectModifierDefinition).

## Prerequisites

- D02-002 must be complete (reference_data_versions table exists for FK reference).

## FRD Reference

- Domain 2 Section 2.2: WCB fee schedule with 11 fields. ~500-1,000 records.
- Domain 2 Section 2.3: Modifier definitions with 16 fields. ~15-20 modifiers including CMGP, LSCD, AFHR, BCP, RRNP, TM, ANE, AST, age modifiers.

## Run After Completion

```bash
pnpm --filter shared build
```

All tests must pass before outputting [TASK_COMPLETE].
