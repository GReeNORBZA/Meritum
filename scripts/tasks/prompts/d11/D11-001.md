# D11-001 — Onboarding Constants: Step Enums, BA Statuses, IMA Template Version, Tour Stops, Audit Actions

**Task ID:** D11-001
**Domain:** 11 — Onboarding
**Section:** Shared Types & Constants
**Verify:** `pnpm --filter shared build`

---

## Build Instructions

Create `packages/shared/src/constants/onboarding.constants.ts` with all onboarding constants:

### OnboardingStep Enum (7 steps)

- PROFESSIONAL_IDENTITY = 1
- SPECIALTY_TYPE = 2
- BUSINESS_ARRANGEMENT = 3
- PRACTICE_LOCATION = 4
- WCB_CONFIGURATION = 5
- SUBMISSION_PREFERENCES = 6
- IMA_ACKNOWLEDGEMENT = 7

### Required Steps

Onboarding completes when ALL required steps are done:

- Steps 1, 2, 3, 4, 7 are **REQUIRED**
- Steps 5, 6 are **OPTIONAL** (can be deferred)

Export a `REQUIRED_ONBOARDING_STEPS` array or set containing [1, 2, 3, 4, 7].

### BA Linkage Status Enum

- PENDING — AHC11236 submitted, awaiting Alberta Health processing (2-4 weeks)
- ACTIVE — Alberta Health confirmed linkage, claims can be submitted via H-Link
- INACTIVE — BA deactivated

### IMA Template Version

Current version string (e.g., `'1.0.0'`). Used to detect template updates requiring re-acknowledgement.

Export as `IMA_TEMPLATE_VERSION`.

### Guided Tour Stops (6 stops)

- DASHBOARD_OVERVIEW
- CREATE_CLAIM
- AI_COACH
- THURSDAY_BATCH
- NOTIFICATIONS
- HELP

### Audit Action Identifiers

- `onboarding.started`
- `onboarding.step_completed`
- `onboarding.completed`
- `onboarding.ima_acknowledged`
- `onboarding.ima_downloaded`
- `onboarding.ahc11236_downloaded`
- `onboarding.pia_downloaded`
- `onboarding.patient_import_completed`
- `onboarding.guided_tour_completed`
- `onboarding.guided_tour_dismissed`
- `onboarding.ba_status_updated`

Export all as frozen objects / TypeScript enums.

### Barrel Export

Update `packages/shared/src/constants/index.ts` to re-export everything from `./onboarding.constants`.

---

## FRD References

- **Domain 11 Section 2.1:** 7-step wizard. Steps 1-4 and 7 required. Steps 5-6 optional. Platform blocks claim creation until `onboarding_completed = true`.
- **Domain 11 Section 4.2:** BA Linkage Status — PENDING, ACTIVE, INACTIVE. Claims can be created and queued while PENDING but not transmitted until ACTIVE.
- **Domain 11 Section 6:** Post-onboarding guided tour with 6 stops. Dismissible. Does not reappear.

---

## Codebase Context

- **Monorepo structure:** `apps/api` (Fastify 5 + Vitest), `packages/shared` (Drizzle + Zod), `apps/web` (Next.js 15)
- **Constants location:** `packages/shared/src/constants/`
- **Barrel export:** Update `packages/shared/src/constants/index.ts`
- **Existing pattern:** Look at other domain constants files in `packages/shared/src/constants/` for the established pattern (frozen objects vs. TypeScript enums).
- **Auth pattern:** Session cookie auth with `request.session.user` containing `{ id, role, physician_id }`. Roles: physician, delegate, admin.
